# Test data loader

A Docker image that loads test data into a FHIR store.

The data is generated by [bbmri-fhir-gen](https://github.com/samply/bbmri-fhir-gen), according to the [BBMRI/GBA FHIR profile](https://samply.github.io/bbmri-fhir-ig/overview.html).

## Quickstart

The supplied `docker-compose.yml` file can be used for trying things out. It contains a FHIR store (Blaze) and the test data loader. Start it like this:

```
docker-compose up
```

Wait for the test data to finish loading (a couple of minutes). Then try this (in a different console):

```
curl http://localhost:8080/fhir/Patient
```

This should return a list of patients known to the store (all 2000 of them).

## Configuration

The test data loader is configured using environment variables:

| Variable                                  | Description                                                                                                        | Default                          |
|-------------------------------------------|--------------------------------------------------------------------------------------------------------------------|----------------------------------|
| `FHIR_STORE_URL`                          | HTTP Address of the FHIR store                                                                                     | http://store:8080/fhir           |
| `PATIENT_COUNT`                           | Number of patients to be generated.                                                                                | 100                              |

## Building

```
docker build -t samply/test-data-loader . --no-cache
```

## License

Copyright 2023 The Samply Community
Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
